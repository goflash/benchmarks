#!/usr/bin/env bash
set -euo pipefail

# Build Flash, Gin, Fiber servers
cd "$(dirname "$0")/.."

mkdir -p build

echo "Building Flash..."
(
  cd flash
  GO111MODULE=on go mod tidy
  GO111MODULE=on go build -o ../build/flash .
)

echo "Building Gin..."
(
  cd gin
  GO111MODULE=on go mod tidy
  GO111MODULE=on go build -o ../build/gin .
)

echo "Building Fiber..."
(
  cd gofiber
  GO111MODULE=on go mod tidy
  GO111MODULE=on go build -o ../build/gofiber .
)

echo "Done. Binaries in scripts/speedtest/build"
